\ProvidesPackage{Ball}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%This Block can draw small Ball
%Elementwise or reduction operations can be drawn with this
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\tikzset{Ball/.pic={\tikzset{/sphere/.cd,#1}	 	

\pgfmathsetmacro{\r}{\radius*\scale}

% Enhanced ball with better shading and 3D look
\shade[ball color=\fill,opacity=\opacity] (0,0,0) circle (\r);
\draw[thick] (0,0,0) circle [radius=\r];

% Better logo display with scaling
\node[font=\bfseries, scale=1.5*\r] at (0,0,0) {\logo};

% Optional: Add operation type indicator
\ifx\optype\undefined\else
    \ifx\optype\empty\else
        \node[font=\scriptsize\sffamily, below=1.3*\r of {(0,0,0)}] {\optype};
    \fi
\fi

% Optional: Add rays for reductions
\ifx\showrays\undefined\else
    \ifnum\showrays=1
        \foreach \angle in {0,30,...,330} {
            \draw[->, gray, opacity=0.5] (0,0,0) -- (\angle:\r*1.3);
        }
    \fi
\fi

% Better caption placement and styling
\ifx\caption\empty\else
    \node[font=\small\sffamily\bfseries, below=1.8*\r of {(0,0,0)}] {\caption};
\fi

\coordinate (\name-anchor) at ( 0 , 0  , 0) ;
\coordinate (\name-east)   at ( \r, 0  , 0) ;
\coordinate (\name-west)   at (-\r, 0  , 0) ;
\coordinate (\name-north)  at ( 0 , \r , 0) ;
\coordinate (\name-south)  at ( 0 , -\r, 0) ;

},
/sphere/.search also={/tikz},
/sphere/.cd,
radius/.store       in=\radius,
scale/.store        in=\scale,
caption/.store      in=\caption,
name/.store         in=\name,
fill/.store         in=\fill,
logo/.store         in=\logo,
opacity/.store      in=\opacity,
optype/.store       in=\optype,
showrays/.store     in=\showrays,
logo=$\Sigma$,
fill=green,
opacity=0.15,
scale=0.2,
radius=0.5,
caption=,
name=,
optype=,
showrays=0,
}