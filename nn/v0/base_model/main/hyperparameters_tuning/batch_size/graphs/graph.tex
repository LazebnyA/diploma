\documentclass[border=5pt]{standalone}
\usepackage{pgfplots}
\pgfplotsset{compat=1.18}
\usepackage{siunitx}
\usepackage{tikz}
\usetikzlibrary{calc}

% Define colors for different batch sizes
\definecolor{Batch4Color}{RGB}{31,119,180}   % Blue for batch size 4
\definecolor{Batch8Color}{RGB}{44,160,44}    % Green for batch size 8
\definecolor{Batch16Color}{RGB}{214,39,40}   % Red for batch size 16
\definecolor{Batch32Color}{RGB}{148,103,189} % Purple for batch size 32

\begin{document}
\begin{tikzpicture}[remember picture]

    % Plot 1: Loss
    \begin{axis}[
        name=plot1,
        width=6cm,
        height=6cm,
        xlabel={Епоха},
        ylabel={Loss},
        ylabel style={yshift=-0.15cm},
        xmin=0.5, xmax=5.5,
        ymin=0.4, ymax=5.0,
        xtick={1,2,3,4,5},
        grid=both,
        grid style={line width=.1pt, draw=gray!10},
        major grid style={line width=.2pt,draw=gray!30},
        title={Loss},
        axis background/.style={fill=gray!3},
        title style={yshift=3mm, font=\small\bfseries},
        label style={font=\small},
        tick label style={font=\footnotesize},
        line width=1pt,
        enlarge x limits=0.05,
        enlarge y limits=0.05,
        every axis plot/.append style={no markers},
        legend to name=commonlegend,
        legend columns=4,
        legend style={draw=none, fill=none, font=\footnotesize, column sep=0.1cm}
    ]
        % Batch size 4 Train
        \addplot[color=Batch4Color, thick] coordinates {
            (1,2.55564) (2,1.28910) (3,0.88385) (4,0.68678) (5,0.56574)
        };
        % Batch size 4 Validation
        \addplot[color=Batch4Color, thick, dashed] coordinates {
            (1,1.64673) (2,1.05419) (3,0.83484) (4,0.71927) (5,0.67444)
        };
        % Batch size 8 Train
        \addplot[color=Batch8Color, thick] coordinates {
            (1,3.00944) (2,1.65929) (3,1.16345) (4,0.90604) (5,0.74421)
        };
        % Batch size 8 Validation
        \addplot[color=Batch8Color, thick, dashed] coordinates {
            (1,2.02678) (2,1.36017) (3,1.05391) (4,0.87862) (5,0.80457)
        };
        % Batch size 16 Train
        \addplot[color=Batch16Color, thick] coordinates {
            (1,3.40516) (2,1.99655) (3,1.55603) (4,1.19691) (5,0.96212)
        };
        % Batch size 16 Validation
        \addplot[color=Batch16Color, thick, dashed] coordinates {
            (1,2.24879) (2,1.80368) (3,1.38764) (4,1.13891) (5,0.93048)
        };
        % Batch size 32 Train
        \addplot[color=Batch32Color, thick] coordinates {
            (1,4.66736) (2,2.57281) (3,2.19490) (4,1.91720) (5,1.67218)
        };
        % Batch size 32 Validation
        \addplot[color=Batch32Color, thick, dashed] coordinates {
            (1,2.84374) (2,2.38217) (3,2.07943) (4,1.80395) (5,1.57965)
        };
        \legend{4 Tr, 4 Val, 8 Tr, 8 Val, 16 Tr, 16 Val, 32 Tr, 32 Val}
    \end{axis}

    % Plot 2: CER
    \begin{axis}[
        name=plot2,
        at={($(plot1.east)+(2cm,0)$)},
        anchor=west,
        width=6cm,
        height=6cm,
        xlabel={Епоха},
        ylabel={CER},
        ylabel style={yshift=-0.15cm},
        xmin=0.5, xmax=5.5,
        ymin=0.1, ymax=1.0,
        xtick={1,2,3,4,5},
        grid=both,
        grid style={line width=.1pt, draw=gray!10},
        major grid style={line width=.2pt,draw=gray!30},
        title={CER},
        axis background/.style={fill=gray!3},
        title style={yshift=3mm, font=\small\bfseries},
        label style={font=\small},
        tick label style={font=\footnotesize},
        line width=1pt,
        enlarge x limits=0.05,
        enlarge y limits=0.05,
        every axis plot/.append style={no markers}
    ]
        % Batch size 4 Train
        \addplot[color=Batch4Color, thick] coordinates {
            (1,0.77209) (2,0.42826) (3,0.29012) (4,0.22430) (5,0.18587)
        };
        % Batch size 4 Validation
        \addplot[color=Batch4Color, thick, dashed] coordinates {
            (1,0.54661) (2,0.34389) (3,0.27015) (4,0.22245) (5,0.20682)
        };
        % Batch size 8 Train
        \addplot[color=Batch8Color, thick] coordinates {
            (1,0.83687) (2,0.54302) (3,0.37980) (4,0.29357) (5,0.24101)
        };
        % Batch size 8 Validation
        \addplot[color=Batch8Color, thick, dashed] coordinates {
            (1,0.65285) (2,0.43395) (3,0.33358) (4,0.27622) (5,0.25401)
        };
        % Batch size 16 Train
        \addplot[color=Batch16Color, thick] coordinates {
            (1,0.87079) (2,0.67414) (3,0.52642) (4,0.40100) (5,0.31941)
        };
        % Batch size 16 Validation
        \addplot[color=Batch16Color, thick, dashed] coordinates {
            (1,0.75715) (2,0.61700) (3,0.46472) (4,0.38785) (5,0.29977)
        };
        % Batch size 32 Train
        \addplot[color=Batch32Color, thick] coordinates {
            (1,0.94340) (2,0.83050) (3,0.76721) (4,0.68063) (5,0.58672)
        };
        % Batch size 32 Validation
        \addplot[color=Batch32Color, thick, dashed] coordinates {
            (1,0.87429) (2,0.81334) (3,0.74855) (4,0.64110) (5,0.55225)
        };
    \end{axis}

    % Plot 3: WER
    \begin{axis}[
        name=plot3,
        at={($(plot2.east)+(2cm,0)$)},
        anchor=west,
        width=6cm,
        height=6cm,
        xlabel={Епоха},
        ylabel={WER},
        ylabel style={yshift=-0.15cm},
        xmin=0.5, xmax=5.5,
        ymin=0.3, ymax=1.0,
        xtick={1,2,3,4,5},
        grid=both,
        grid style={line width=.1pt, draw=gray!10},
        major grid style={line width=.2pt,draw=gray!30},
        title={WER},
        axis background/.style={fill=gray!3},
        title style={yshift=3mm, font=\small\bfseries},
        label style={font=\small},
        tick label style={font=\footnotesize},
        line width=1pt,
        enlarge x limits=0.05,
        enlarge y limits=0.05,
        every axis plot/.append style={no markers}
    ]
        % Batch size 4 Train
        \addplot[color=Batch4Color, thick] coordinates {
            (1,0.84420) (2,0.65660) (3,0.54232) (4,0.46403) (5,0.41167)
        };
        % Batch size 4 Validation
        \addplot[color=Batch4Color, thick, dashed] coordinates {
            (1,0.73043) (2,0.59655) (3,0.52390) (4,0.47336) (5,0.45805)
        };
        % Batch size 8 Train
        \addplot[color=Batch8Color, thick] coordinates {
            (1,0.88430) (2,0.72658) (3,0.62213) (4,0.54530) (5,0.48655)
        };
        % Batch size 8 Validation
        \addplot[color=Batch8Color, thick, dashed] coordinates {
            (1,0.78616) (2,0.66427) (3,0.59137) (4,0.53489) (5,0.50840)
        };
        % Batch size 16 Train
        \addplot[color=Batch16Color, thick] coordinates {
            (1,0.89720) (2,0.77428) (3,0.70788) (4,0.63273) (5,0.56309)
        };
        % Batch size 16 Validation
        \addplot[color=Batch16Color, thick, dashed] coordinates {
            (1,0.82339) (2,0.75992) (3,0.68358) (4,0.63354) (5,0.55407)
        };
        % Batch size 32 Train
        \addplot[color=Batch32Color, thick] coordinates {
            (1,0.94992) (2,0.86564) (3,0.80781) (4,0.74954) (5,0.70942)
        };
        % Batch size 32 Validation
        \addplot[color=Batch32Color, thick, dashed] coordinates {
            (1,0.89598) (2,0.84613) (3,0.78915) (4,0.73518) (5,0.69682)
        };
    \end{axis}

    % Legend
    \node at ($(plot1.south)!0.5!(plot3.south)+(0,-2cm)$) {\pgfplotslegendfromname{commonlegend}};

\end{tikzpicture}
\end{document}